
## 七、记忆检索方案

### 7.1 隐藏信息提取困境

现在困扰我的还是之前提到的问题，检索器，甚至是主 LLM，都不能准确提取用户在对话中的隐藏信息。

比如 A、B 两人在对话：
```
A: 今天睡这么早啊
B: 明天就考试了，我得养精蓄锐
```

从这句对话中就可以得到几点信息：
1. B 之前可能有熬夜行为
2. B 明天要考试
3. B 可能是学生，并且对自己的成绩比较在意

就这样一段简短的对话，正常情况下我希望 LLM 能够调用记忆工具来保存这些信息，但在测试过程中我发现无论怎样提示 AI，他都不能正确更新记忆。

### 7.2 记忆检索的被动性

还有记忆检索，考虑到群聊环境比较复杂，尤其是参与人数多，记忆种类不相同，传统 RAG 记忆方案可能不能满足要求，因此我也设计了一个可以调用的记忆检索工具，当 LLM 需要检索记忆时调用此工具。但在测试过程中发现，只有明确提出"你还记得..."等要求时，LLM 才肯调用记忆检索工具。而不是根据上下文主动调用，比如：

```
（假设记忆库中有上文关于B的记忆，但这属于外部信息）
（AI注意到B正在发言，但是核心记忆库和对话上下文没有B的相关记忆，于是调用记忆检索工具，关键词为B的用户名）
（检索到B面临考试，结合当前时间推断考试已经结束，询问考试结果）
生成回复：呀，你来找我聊天啦~考得怎么样呀
```
